# 📚 Aura – AI-Powered Study Partner

This document provides a comprehensive overview of **Aura**, an AI-powered study partner application built with Flutter. It covers the application's purpose, key features, technology stack, and high-level system architecture.

> 💡 For detailed information about specific subsystems, refer to the corresponding sections:  
> - [📚 Overview](#-application-purpose-and-scope)  
> - [🔐 Authentication System](#-authentication-system)  
> - [📁 Document Management](#-document-management)  
> - [🤖 AI Integration](#-ai-integration)  
> - [🎨 User Interface System](#-user-interface-system) 

---

## 🎯 Application Purpose and Scope

Aura is a cross-platform mobile application designed to enhance the study experience through AI-powered document analysis and summarization.

- Users can upload various document formats
- Receive intelligent summaries generated by Google's Gemini AI
- Manage their study materials through an intuitive interface

The system integrates:
- Multiple OAuth providers for authentication
- Robust document management with local caching
- A responsive UI with light/dark themes and internationalization support

---

## ✨ Key Features

| Feature Category     | Capabilities                                                                 |
|----------------------|------------------------------------------------------------------------------|
| **Authentication**   | OAuth integration with Google, GitHub, and Discord providers                |
| **Document Management** | File upload, recent documents tracking, local caching with Hive            |
| **AI Processing**    | Document summarization using Google Gemini AI                               |
| **User Interface**   | Material Design 3, dark/light themes, internationalization                  |
| **Session Management** | Persistent login state, user profile management                            |
| **Cross-platform**   | iOS and Android support with responsive design                              |

---

## 📸 App Demo & Screenshots

### 🎥 Live Demo  
https://github.com/user-attachments/assets/37aa3a29-5255-4548-9e97-a690ba71e6e5
> ⏳ *Coming Soon*

---

### 🖼️ Screenshots  
> ⏳ *Coming Soon*

---

## 🛠️ Technology Stack

### Core Framework and State Management  
![Core Stack](https://github.com/user-attachments/assets/a2a52706-691a-4bc0-afa9-18a027e2825e)

### External Integrations and Storage  
![External Integrations](https://github.com/user-attachments/assets/c32c32da-0335-491a-b4cf-4079ba8048bc)

---

## 🧠 High-Level System Architecture

### Application Bootstrap and Core Services  
![App Bootstrap](https://github.com/user-attachments/assets/991c1922-6e89-4705-800b-c2e313c18e2a)  
The application initializes through the `main()` function, setting up:
- Dependency injection
- Local database initialization
- Internationalization
- Theme management

### Core System Components  
![System Components](https://github.com/user-attachments/assets/aafc05ee-dd1e-49c0-8ca9-1e56a55d2b5a)  
Aura follows a **layered architecture** with clear separation between:
- UI components
- Business logic (Cubits)
- Data repositories
- External services

---

## 👣 Application Flow and User Journey

### Primary User Workflows  
![User Journey](https://github.com/user-attachments/assets/aec17a87-9df7-4e4e-8962-60614ac56b6a)  
Users are guided through:
1. Onboarding
2. Authentication
3. Main interface for:
   - Uploading documents
   - Generating AI summaries
   - Managing profiles

---

## 🗃️ Data Architecture

### Storage and Caching Strategy  
![Data Strategy](https://github.com/user-attachments/assets/a9138f9e-f643-45d8-ba7d-f5ea843fd5a3)  
Aura uses a **multi-layered caching strategy**:
- **Hive** for document storage  
- **SharedPreferences** for user session data  
- **Dio** for all HTTP communications  

---

# 🔐 Authentication System

This section covers the **complete authentication system** in Aura, including registration, login, OAuth, and session handling.

- User registration
- Login
- OAuth integration
- Email verification
- Session management

The authentication system provides secure access control and user identity management for the AI-powered study partner application.

---

## 🧱 Architecture Overview

Aura’s authentication system follows a **layered architecture** with clear separation of concerns using:

- The **Repository pattern**
- **BLoC (Cubit)** for state management

### 📊 Authentication System Architecture  
![Authentication Architecture](https://github.com/user-attachments/assets/b06beadb-f0f5-4283-81d7-dee767ccbeb5)

---

## 🔁 Core Authentication Flow

The authentication system supports three primary flows:

1. **Login**
2. **Registration with email verification**
3. **OAuth authentication**

### 🔄 Flow Diagram  
![Core Auth Flow](https://github.com/user-attachments/assets/53fef7e1-4faf-449f-a7bc-aa1c9c915488)

---

## 📦 Repository Implementation

The `AuthRepoImpl` class implements the core authentication logic.  
It includes the following key operations:

| Method        | Purpose                   | Endpoint              | Session Management                 |
|---------------|---------------------------|------------------------|-------------------------------------|
| `login()`     | User authentication       | `Endpoints.login`      | Saves token and sets logged in      |
| `register()`  | User registration         | `Endpoints.register`   | No automatic session setup          |
| `emailVerify()` | Email verification with OTP | `Endpoints.emailVerify` | Saves token and sets logged in    |

---

## 📑 State Management

The `AuthCubit` manages authentication state and form validation.  

### 🧾 Form Management

- `GlobalKey<FormState>` – for form validation  
- `AutovalidateMode` – controls auto validation behavior  
- Separate field storage for login and registration forms

### 🔄 State Flow  
![State Flow](https://github.com/user-attachments/assets/9bda2afe-c06a-416d-bab9-a2727097d133)

### 📦 State Classes

- `AuthInitial` – Initial state
- `AuthLoading` – While calling APIs
- `AuthSuccess` – On successful authentication (with `UserModel`)
- `AuthError` – On error (with message and optional field errors)
- `FormValidationState` – Triggered when form validation fails

---

## 🌐 OAuth Integration

Aura supports **OAuth authentication** through **deep link callbacks** handled by the routing system.

### 🔁 OAuth Callback Flow  
![OAuth Callback Flow](https://github.com/user-attachments/assets/ddc19c47-8b28-404e-a9cd-843d5ff65965)

---

## 🔐 Session Management

Session persistence is handled through `UserCacheHelper`, which abstracts local storage.

### 🧮 Session Operations

| Method            | Purpose                        | Storage Backend     |
|-------------------|--------------------------------|----------------------|
| `saveUserToken()` | Store authentication token     | SharedPreferences    |
| `setLoggedIn()`   | Set login status flag          | SharedPreferences    |
| Session validation| Check if user is authenticated | On app startup       |

### 🔄 Session Flow  
![Session Flow](https://github.com/user-attachments/assets/581ec0ac-0609-48de-9b99-9ee4557d57f4)

---

## 🌐 API Integration

The authentication system integrates with a **Laravel backend API** hosted at:

> `https://aura.laravel.cloud`

### 🔗 API Endpoints

| Operation         | Endpoint                | HTTP Method | Request Data                                      |
|------------------|--------------------------|-------------|--------------------------------------------------|
| Login            | `Endpoints.login`        | POST        | `email`, `password`                              |
| Registration     | `Endpoints.register`     | POST        | `firstName`, `lastName`, `email`, `password`, `passwordConfirmation` |
| Email Verification | `Endpoints.emailVerify` | POST        | `email`, `verificationCode`                      |

---

## ❌ Error Handling

Aura handles:

- **Network errors**
- **Validation errors** from the Laravel backend

### ⚠️ Error Types

- `ServerFailure`:  
  Includes:
  - Error message  
  - Optional field-specific errors (e.g., invalid email/password)

- `Generic Failure`:  
  For unknown or non-validation related issues

All form validation errors are **surfaced in the UI** via the `AuthError` state.

---

# 📁 Document Management

This section covers the **document management system** in Aura, which handles:

- File uploads  
- Recent document tracking  
- Local caching  
- Document processing workflows  

The system enables users to:
- Upload PDF documents  
- View their recent uploads  
- Integrate with AI-powered summarization features  

---

### 🧩 System Overview

The document management system consists of three main subsystems:

- **File upload handling**  
- **Recent document management**  
- **Local document caching**

The system uses the **BLoC/Cubit pattern** for state management and integrates with the **backend API** for document storage and processing.

---

### 🏗️ Document Management Architecture

![Document Management Architecture](https://github.com/user-attachments/assets/942b030d-e775-45dc-97af-1782965bf6ca)

---

### 📤 File Upload System

The file upload system handles file selection, validation, and upload processing through a dedicated button component and file picker integration.

#### File Selection and Upload Process

![File Selection and Upload](https://github.com/user-attachments/assets/aa08626c-8d04-4c2b-87f9-ab9c83c8e8f2)

The `BrowseFileButton` component handles the complete file upload workflow. It restricts file selection to PDF documents only and performs validation before processing.

---

### 💾 Document Caching System

The caching system provides **local storage for document metadata** and enables **offline access** to recent document information.

#### Cache Integration Architecture

![Cache Integration Architecture](https://github.com/user-attachments/assets/18f067cd-8c01-471d-96dd-1bdfc1e327a4)

It maintains two parallel data sources:

| Data Source   | Purpose                      | Usage                              |
|---------------|------------------------------|-------------------------------------|
| `docs`        | Remote document data from API | Primary data source for document list |
| `cacheDocs`   | Local cached metadata         | Backup data and offline support     |

---

### 🔄 State Management Integration

The document management system uses the **BLoC pattern** via `RecentUploadsCubit` to manage document-related state.

#### State Management Features

| Operation       | Trigger                             | State Change                                  |
|------------------|--------------------------------------|-----------------------------------------------|
| Initial Load     | `initState()` in `RecentItemsListView` | Calls `loadRecentUploads()`                   |
| File Upload      | Button press in `BrowseFileButton`     | Calls `uploadDoc()` and `addRecentUpload()`   |
| Pagination       | User scrolling / load more            | Calls `loadMoreUploads()`                     |
| Error Handling   | API failures                          | Emits `RecentUploadsError` state              |

The state integrates with the UI using `BlocBuilder` widgets that automatically rebuild when state changes occur.


---

# 🤖 AI Integration

This document covers the AI integration system in Aura, which provides intelligent document summarization capabilities using Google's Gemini AI.  
The system handles:

- Document processing  
- AI API integration  
- State management for AI operations  
- User interface components for displaying AI-generated summaries  

---

### 🧠 AI Architecture Overview

The AI integration system is built around a layered architecture that separates concerns between state management, data processing, and external API communication.

#### Core AI Components

<img width="1428" height="772" alt="AI Architecture" src="https://github.com/user-attachments/assets/f9289346-4402-4b81-aa34-d80eb82820ce" />

---

### 🔁 State Management for AI Operations

The AI integration uses the **BLoC pattern** through `SummaryCubit` to manage the state of summarization operations.

#### State Management Components

| Component        | Purpose                     | Key Methods        |
|------------------|------------------------------|--------------------|
| SummaryCubit     | Manages AI operation states | `summarizeDoc()`   |
| SummaryState     | Base state class             | Abstract state     |
| SummarySuccess   | Success state with results   | Contains summary, documentId |
| SummaryFailure   | Error state                  | Contains error, documentId   |

#### State Handling Implementation

The state management implementation includes **document-specific tracking** to handle multiple concurrent operations:

<img width="755" height="772" alt="State Tracking" src="https://github.com/user-attachments/assets/10b4dd94-47bc-43dd-856c-94ace1418f87" />

The system tracks processing state per document using `currentProcessingUrl` to prevent race conditions when multiple documents are processed simultaneously.

---

### 🤝 Gemini API Integration

The application integrates with **Google's Gemini AI** through two primary packages: `flutter_gemini` and `google_generative_ai`.

#### AI Package Dependencies

| Package                | Version  | Purpose                              |
|------------------------|----------|--------------------------------------|
| flutter_gemini         | ^3.0.0   | Flutter-specific Gemini integration  |
| google_generative_ai   | ^0.4.7   | Official Google Generative AI SDK    |
| http                   | ^1.4.0   | HTTP client for file operations      |

---

### 📦 File Processing Pipeline

The system implements a robust pipeline that handles:

1. **File Download**: From remote URLs using `http.Client`
2. **Temporary Storage**: Via `getTemporaryDirectory()` for processing
3. **AI Processing**: Files are sent to Gemini API through the repository layer
4. **Result Handling**: Success/failure states are propagated via Cubit

---

### ⚠️ Error Handling & User Experience

The AI integration system includes comprehensive **error handling** to provide meaningful feedback to users.

#### Error Handling Strategy

<img width="1548" height="511" alt="Error Handling" src="https://github.com/user-attachments/assets/63b49019-3fc2-4163-a64f-d59a4557a73a" />

---

### 🎨 User Interface States

The system provides visual feedback during AI operations via:

- **Processing State**: Shows `LoadingAnimationWidget.inkDrop`
- **Success State**: Navigates to `SummarizeView` with the generated summary
- **Error State**: Displays localized messages using `showSnackBar()`


---

# 🎨 User Interface System

The **User Interface system** serves as the main application container and navigation hub for authenticated users in the Aura application. It orchestrates the core user experience by managing:

- Navigation between primary views (`Home`, `Summary`, `Profile`)
- State management across multiple feature modules
- Theme integration and profile handling

---

### 🧱 Component Architecture

The Home Interface is built around a hierarchical structure of three main components that work together to deliver a cohesive application experience.

**Core Component Hierarchy**  
<img width="1687" height="394" alt="Core Component Hierarchy" src="https://github.com/user-attachments/assets/885497a7-0e77-4d57-b90d-299bed236240" />

---

### 🧭 Navigation System

The navigation system uses a `PageView` with a custom bottom navigation bar to provide smooth transitions between the three main application sections.

**Navigation Flow**  
<img width="1691" height="508" alt="Navigation Flow" src="https://github.com/user-attachments/assets/884dbf64-c6a7-4464-a0f8-d27359dcc9ce" />

---

### 🧩 State Management Integration

The Home Interface coordinates multiple `BLoC`/`Cubit` instances through a `MultiBlocProvider` setup, enabling cross-feature state management and shared data access.

**BLoC Provider Architecture**  
<img width="1692" height="433" alt="BLoC Provider Architecture" src="https://github.com/user-attachments/assets/486abd33-1fe9-4a17-8a73-6f8ebf69bf48" />

---

### 👤 User Profile Management

The `HomeView` implements a specific user profile loading and caching mechanism that ensures user data availability across the app.

<img width="1465" height="568" alt="User Profile Management" src="https://github.com/user-attachments/assets/061912b0-a039-4b12-b5ab-0b22b9cb1dea" />

---

### 🎨 Theme Integration

The `CustomNavBar` provides full theme support with dynamic color adaptation based on the current theme brightness.

| Theme Mode | Background Color      | Selected Item Color | Unselected Item Color |
|------------|------------------------|----------------------|------------------------|
| Dark       | `colorScheme.secondary`| `Colors.black`       | `Colors.black54`      |
| Light      | `Color(0xff390050)`    | `Colors.white`       | `Colors.white70`      |

